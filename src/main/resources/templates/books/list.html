<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${title}">도서 목록</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
  <header>
    <h1 th:text="${title}">* 도서 목록 *</h1>
    <nav class="breadcrumb">
      <a th:href="@{/}">HOME</a>
    </nav>
  </header>
  <main>
    <div class="stats-section">
      <div class="stat-card">
        <h3>전체 도서</h3>
        <p class="stat-number" th:text="${#lists.size(books)}">0</p>
      </div>
      <div class="stat-card">
        <h3>대출 가능</h3>
        <p class="stat-number" th:text="${#lists.size(books.?[available])}">0</p>
      </div>
      <div class="stat-card">
        <h3>대출 중</h3>
        <p class="stat-number" th:text="${#lists.size(books.?[!available])}">0</p>
      </div>
    </div>

    <div class="books-grid">
      <div class="book-card" th:each="book : ${books}">
        <div class="book-image">
          <img th:src="@{${book.coverImageUrl}}"
               th:alt="${book.title}">
        </div>

        <div class="book-info">
          <h3 class="book-title">
            <a th:href="@{/book/{id}(id=${book.id})}"
               th:text="${book.title}">도서 제목</a>
          </h3>

          <p class="book-author" th:text="${book.author}">저자명</p>

          <p class="book-meta">
            <span th:text="${book.publisher}">출판사</span> |
            <span th:text="${#temporals.format(book.publishDate, 'yyyy년 MM월')}">출간일</span>
          </p>

          <span class="book-category" th:text="${book.category}">카테고리</span>

          <p class="book-price" th:text="${book.price}">가격</p>

          <span class="availability-badge"
                th:class="'availability-badge ' + (${book.available} ? 'available' : 'unavailable')"
                th:text="${book.available} ? '대출 가능' : '대출 중'">대출 상태</span>

          <!-- 설명 (짧은 버전) -->
          <p class="book-description" th:text="${book.shortDescription}">도서 설명</p>

          <!-- 액션 버튼 -->
          <div class="book-actions">
            <a th:href="@{/book/{id}(id=${book.id})}" class="btn btn-primary">상세보기</a>
            <button th:if="${book.available}" class="btn btn-success">대출하기</button>
            <button th:unless="${book.available}" class="btn btn-secondary" disabled>대출 불가</button>
          </div>
        </div>
      </div>
    </div>

    <div th:if="${#lists.isEmpty(books)}" class="no-books-message">
      <p>📚 등록된 도서가 없습니다.</p>
      <a href="#" class="btn btn-primary">첫 번째 도서 등록하기</a>
    </div>

    <div class="learning-section">
      <h3>🎓 Thymeleaf 문법 학습</h3>
      <p>다양한 Thymeleaf 표현식을 실습해보세요!</p>
      <a th:href="@{/book/syntax-examples}" class="btn btn-info">문법 예제 보기</a>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Thymeleaf Tutorial - Step 2: 기본 문법</p>
  </footer>

  <script th:src="@{/js/main.js}"></script>
</div>
</body>
</html>